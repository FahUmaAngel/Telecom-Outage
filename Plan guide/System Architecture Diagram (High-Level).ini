┌────────────────────────────────────────────────────────────┐
│                        USERS                               │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐          │
│  │  Public    │  │ Researcher │  │ Regulator  │          │
│  │  Users     │  │ / Analyst  │  │ / Media    │          │
│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘          │
└────────┼───────────────┼───────────────┼─────────────────┘
         │ HTTPS (Read / Report)
         ▼
┌────────────────────────────────────────────────────────────┐
│                    FRONTEND (Web App)                      │
│            React / Next.js + Mapbox / Leaflet              │
│                                                            │
│  - Live Outage Map                                         │
│  - Incident Details                                       │
│  - Analytics Dashboards (MTTR, Trends)                     │
│  - Report an Issue (Crowdsourcing)                         │
│  - Transparency & Methodology Pages                        │
│                                                            │
└───────────────┬────────────────────────────────────────────┘
                │ REST / GraphQL API
                ▼
┌────────────────────────────────────────────────────────────┐
│                    BACKEND API                             │
│              FastAPI / Node.js                             │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │  Auth & RBAC                                        │   │
│  │  - Public / Researcher / Regulator / Admin          │   │
│  └────────────────────────────────────────────────────┘   │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │  Outage Engine (Core Logic)                          │   │
│  │  - Deduplication                                    │   │
│  │  - Severity Scoring                                 │   │
│  │  - Status Change Detection                          │   │
│  │  - MTTR Calculation                                 │   │
│  └────────────────────────────────────────────────────┘   │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │  Analytics & Reporting                              │   │
│  │  - Historical Queries                               │   │
│  │  - Trend / Heatmap                                  │   │
│  │  - Dataset Export                                   │   │
│  └────────────────────────────────────────────────────┘   │
└───────────────┬────────────────────────────────────────────┘
                │
                ▼
┌────────────────────────────────────────────────────────────┐
│                    DATABASE LAYER                          │
│        PostgreSQL + PostGIS (Geospatial)                   │
│                                                            │
│  - operators                                              │
│  - outages (raw + normalized)                              │
│  - outage_updates (timeline)                               │
│  - crowd_reports (aggregated)                              │
│  - analytics_snapshots (MTTR, stats)                       │
│                                                            │
│  * Immutable raw data + audit logs                         │
└───────────────┬────────────────────────────────────────────┘
                │
                ▼
┌────────────────────────────────────────────────────────────┐
│                DATA INGESTION LAYER                        │
│            (Independent, Isolated Services)                │
│                                                            │
│  ┌───────────────┐     ┌───────────────┐                  │
│  │ Telia Scraper │     │ Tre Scraper   │                  │
│  │ (HTML / API)  │     │ (HTML / JSON) │                  │
│  └──────┬────────┘     └──────┬────────┘                  │
│         │                      │                           │
│         └──────────┬───────────┘                           │
│                    ▼                                       │
│          ┌──────────────────────────────┐                 │
│          │ Normalizer & Mapper           │                 │
│          │ - Schema standardization      │                 │
│          │ - Geo resolution              │                 │
│          │ - Timestamp alignment         │                 │
│          └──────────────────────────────┘                 │
│                                                            │
│  ┌──────────────────────────────┐                         │
│  │ Crowdsource Ingestion        │                         │
│  │ (User Reports / DownDetector)│                         │
│  └──────────────────────────────┘                         │
│                                                            │
│  * Runs every 1–5 minutes (Cron / Celery / Lambda)         │
└────────────────────────────────────────────────────────────┘
